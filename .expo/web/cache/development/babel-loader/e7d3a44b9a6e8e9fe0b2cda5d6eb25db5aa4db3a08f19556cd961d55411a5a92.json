{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useContext, useCallback, useState, useEffect } from 'react';\nimport { useFocusEffect } from '@react-navigation/native';\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Google from 'expo-auth-session/providers/google';\nimport { ActivityIndicator } from 'react-native-paper';\nimport { StatusBar } from 'expo-status-bar';\nimport Constants from 'expo-constants';\nimport { useTranslation } from 'react-i18next';\nimport * as AppleAuthentication from 'expo-apple-authentication';\nimport Styled from \"./styles\";\nimport Button from \"../../components/Button\";\nimport { AuthContext } from \"../../store/context/auth-context\";\nimport api from \"../../services/api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nWebBrowser.maybeCompleteAuthSession();\nvar platform = Constants.platform;\nvar LoginScreen = function LoginScreen(props) {\n  var navigation = props.navigation,\n    route = props.route;\n  var authCtx = useContext(AuthContext);\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    didLoad = _useState2[0],\n    setDidLoad = _useState2[1];\n  var _useState3 = useState({\n      value: false,\n      reason: ''\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isCheckingSocial = _useState4[0],\n    setIsCheckingSocial = _useState4[1];\n  useFocusEffect(useCallback(function () {\n    var onBackPress = function onBackPress() {\n      BackHandler.exitApp();\n      return true;\n    };\n    BackHandler.addEventListener('hardwareBackPress', onBackPress);\n    return function () {\n      return BackHandler.removeEventListener('hardwareBackPress', onBackPress);\n    };\n  }, []));\n  useEffect(function () {\n    if (!didLoad && authCtx != null && authCtx.token) {\n      api.get('/api/v1/users/authenticate').then(function (response) {\n        var token = authCtx.token;\n        var data = response.data.data;\n        var user = {\n          email: data.email,\n          slug: data.slug,\n          name: data.name,\n          avatar: data.avatar\n        };\n        authCtx.login(token, user, new Date().setFullYear(new Date().getFullYear() + 1)).then(function () {\n          var _route$params;\n          if ((_route$params = route.params) != null && _route$params.roomSlug) {\n            var _route$params2;\n            navigation.navigate('JoinConferenceScreen', {\n              roomSlug: (_route$params2 = route.params) == null ? void 0 : _route$params2.roomSlug\n            });\n          } else {\n            navigation.navigate('DrawerNavigator');\n          }\n        }).catch(function (err) {\n          console.log(\"error \" + err);\n        });\n      }).catch(function (err) {\n        console.log(\"error \" + err);\n      });\n      setDidLoad(true);\n    }\n  }, [didLoad, authCtx]);\n  var handleOAuthLogin = function handleOAuthLogin(response) {\n    var token = response.headers.authorization;\n    var data = response.data.data;\n    var user = {\n      email: data.email,\n      slug: data.slug,\n      name: data.name\n    };\n    authCtx.login(token, user, new Date().setFullYear(new Date().getFullYear() + 1)).then(function () {\n      var _route$params3;\n      setIsCheckingSocial({\n        value: false,\n        reason: t('screens.login.socialOk')\n      });\n      if ((_route$params3 = route.params) != null && _route$params3.roomSlug) {\n        var _route$params4;\n        navigation.navigate('JoinConferenceScreen', {\n          roomSlug: (_route$params4 = route.params) == null ? void 0 : _route$params4.roomSlug\n        });\n      } else {\n        navigation.navigate('DrawerNavigator');\n      }\n    }).catch(function (err) {\n      setIsCheckingSocial({\n        value: false,\n        reason: t('screens.login.socialError')\n      });\n      console.log(err);\n    });\n  };\n  var _Google$useAuthReques = Google.useAuthRequest({\n      iosClientId: Constants.expoConfig.extra.GOOGLE_ID,\n      androidClientId: Constants.expoConfig.extra.GOOGLE_ID\n    }),\n    _Google$useAuthReques2 = _slicedToArray(_Google$useAuthReques, 3),\n    request = _Google$useAuthReques2[0],\n    response = _Google$useAuthReques2[1],\n    promptAsync = _Google$useAuthReques2[2];\n  useEffect(function () {\n    if ((response == null ? void 0 : response.type) === 'cancel' || (response == null ? void 0 : response.type) === 'dismiss') {\n      setIsCheckingSocial({\n        value: false,\n        reason: t('screens.login.socialCancel')\n      });\n    }\n    if ((response == null ? void 0 : response.type) === 'success') {\n      var authentication = response.authentication;\n      var accessToken = authentication.accessToken;\n      api.post('/api/v1/users/auth/google/callback', {\n        data: accessToken\n      }).then(function (res) {\n        handleOAuthLogin(res);\n      }).catch(function (error) {\n        console.log(\"Api fail with error: \" + error);\n      });\n    }\n  }, [response]);\n  var handleGoogleButton = function handleGoogleButton() {\n    setIsCheckingSocial({\n      value: true,\n      reason: t('screens.login.socialCheck')\n    });\n    promptAsync();\n  };\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    appleAuthAvailable = _useState6[0],\n    setAppleAuthAvailable = _useState6[1];\n  useEffect(function () {\n    var checkAvailable = function () {\n      var _ref = _asyncToGenerator(function* () {\n        var isAvailable = yield AppleAuthentication.isAvailableAsync();\n        setAppleAuthAvailable(isAvailable);\n      });\n      return function checkAvailable() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    checkAvailable();\n  }, []);\n  var handleAppleButton = function handleAppleButton() {\n    setIsCheckingSocial({\n      value: true,\n      reason: t('screens.login.socialCheck')\n    });\n    AppleSignIn();\n  };\n  var AppleSignIn = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var credential = yield AppleAuthentication.signInAsync({\n          requestedScopes: [AppleAuthentication.AppleAuthenticationScope.FULL_NAME, AppleAuthentication.AppleAuthenticationScope.EMAIL]\n        });\n        api.post('/api/v1/users/auth/apple/callback', {\n          data: {\n            identityToken: credential.identityToken,\n            authorizationCode: credential.authorizationCode,\n            userIdentity: credential.user\n          }\n        }).then(function (res) {\n          handleOAuthLogin(res);\n        }).catch(function (error) {\n          console.log(\"Api fail with error: \" + error);\n          setIsCheckingSocial({\n            value: false,\n            reason: t('screens.login.socialCancel')\n          });\n        });\n      } catch (e) {\n        if (e.code === 'ERR_REQUEST_CANCELED') {\n          setIsCheckingSocial({\n            value: false,\n            reason: t('screens.login.socialCancel')\n          });\n          console.log(e);\n        } else {\n          setIsCheckingSocial({\n            value: false,\n            reason: t('screens.login.socialCancel')\n          });\n          console.log(e);\n        }\n      }\n    });\n    return function AppleSignIn() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var LoginPage = function LoginPage() {\n    return _jsxs(_Fragment, {\n      children: [_jsxs(_Fragment, {\n        children: [_jsx(Styled.AlternateLogin, {\n          children: _jsx(Styled.LoadingText, {\n            children: t('screens.login.login')\n          })\n        }), _jsx(Button, {\n          variant: \"secondary\",\n          onPress: function onPress() {\n            var _route$params5;\n            return navigation.navigate('EmailLoginScreen', {\n              roomSlug: (_route$params5 = route.params) == null ? void 0 : _route$params5.roomSlug\n            });\n          },\n          children: \"Email\"\n        }), _jsx(Button, {\n          variant: \"secondary\",\n          onPress: function onPress() {\n            return handleGoogleButton();\n          },\n          children: \"Google\"\n        }), !platform.android && _jsx(Styled.Apple, {\n          children: appleAuthAvailable && _jsx(AppleAuthentication.AppleAuthenticationButton, {\n            buttonType: AppleAuthentication.AppleAuthenticationButtonType.SIGN_IN,\n            buttonStyle: AppleAuthentication.AppleAuthenticationButtonStyle.BLACK,\n            cornerRadius: 40,\n            style: {\n              justifyContent: 'center',\n              height: 40\n            },\n            onPress: function onPress() {\n              handleAppleButton();\n            }\n          })\n        })]\n      }), _jsx(StatusBar, {\n        style: \"dark\"\n      })]\n    });\n  };\n  var CheckingSocialAnimation = function CheckingSocialAnimation() {\n    return _jsxs(Styled.LoadingContainer, {\n      children: [_jsx(ActivityIndicator, {\n        animating: true,\n        size: \"large\"\n      }), _jsx(Styled.LoadingText, {\n        children: isCheckingSocial.reason\n      })]\n    });\n  };\n  return _jsx(Styled.Container, {\n    children: isCheckingSocial.value ? CheckingSocialAnimation() : LoginPage()\n  });\n};\nexport default LoginScreen;","map":{"version":3,"names":["useContext","useCallback","useState","useEffect","useFocusEffect","BackHandler","WebBrowser","Google","ActivityIndicator","StatusBar","Constants","useTranslation","AppleAuthentication","Styled","Button","AuthContext","api","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","maybeCompleteAuthSession","platform","LoginScreen","props","navigation","route","authCtx","_useTranslation","t","_useState","_useState2","_slicedToArray","didLoad","setDidLoad","_useState3","value","reason","_useState4","isCheckingSocial","setIsCheckingSocial","onBackPress","exitApp","addEventListener","removeEventListener","token","get","then","response","data","user","email","slug","name","avatar","login","Date","setFullYear","getFullYear","_route$params","params","roomSlug","_route$params2","navigate","catch","err","console","log","handleOAuthLogin","headers","authorization","_route$params3","_route$params4","_Google$useAuthReques","useAuthRequest","iosClientId","expoConfig","extra","GOOGLE_ID","androidClientId","_Google$useAuthReques2","request","promptAsync","type","authentication","accessToken","post","res","error","handleGoogleButton","_useState5","_useState6","appleAuthAvailable","setAppleAuthAvailable","checkAvailable","_ref","_asyncToGenerator","isAvailable","isAvailableAsync","apply","arguments","handleAppleButton","AppleSignIn","_ref2","credential","signInAsync","requestedScopes","AppleAuthenticationScope","FULL_NAME","EMAIL","identityToken","authorizationCode","userIdentity","e","code","LoginPage","children","AlternateLogin","LoadingText","variant","onPress","_route$params5","android","Apple","AppleAuthenticationButton","buttonType","AppleAuthenticationButtonType","SIGN_IN","buttonStyle","AppleAuthenticationButtonStyle","BLACK","cornerRadius","style","justifyContent","height","CheckingSocialAnimation","LoadingContainer","animating","size","Container"],"sources":["/home/matheus/mconf/greenlight-mobile/src/screens/LoginScreen/index.js"],"sourcesContent":["/* eslint-disable react/jsx-indent */\nimport {\n  useContext, useCallback, useState, useEffect\n} from 'react';\nimport { useFocusEffect } from '@react-navigation/native';\nimport {\n  BackHandler\n} from 'react-native';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Google from 'expo-auth-session/providers/google';\nimport { ActivityIndicator } from 'react-native-paper';\nimport { StatusBar } from 'expo-status-bar';\nimport Constants from 'expo-constants';\nimport { useTranslation } from 'react-i18next';\nimport * as AppleAuthentication from 'expo-apple-authentication';\nimport Styled from './styles';\nimport Button from '../../components/Button';\nimport { AuthContext } from '../../store/context/auth-context';\nimport api from '../../services/api';\n\nWebBrowser.maybeCompleteAuthSession();\n\nconst { platform } = Constants;\n\nconst LoginScreen = (props) => {\n  const { navigation, route } = props;\n  const authCtx = useContext(AuthContext);\n\n  const { t } = useTranslation();\n\n  const [didLoad, setDidLoad] = useState(false);\n  const [isCheckingSocial, setIsCheckingSocial] = useState({\n    value: false,\n    reason: '',\n  });\n\n  /* useEffects */\n\n  // Back button handler\n  useFocusEffect(\n    useCallback(() => {\n      const onBackPress = () => {\n        BackHandler.exitApp();\n        return true;\n      };\n      BackHandler.addEventListener('hardwareBackPress', onBackPress);\n\n      return () => BackHandler.removeEventListener('hardwareBackPress', onBackPress);\n    }, []),\n  );\n\n  // Authenticate user if token exists\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    if (!didLoad && authCtx?.token) {\n      api.get('/api/v1/users/authenticate')\n        .then((response) => {\n          const { token } = authCtx;\n          const { data } = response.data;\n          const user = {\n            email: data.email, slug: data.slug, name: data.name, avatar: data.avatar\n          };\n          // eslint-disable-next-line react/destructuring-assignment\n          authCtx.login(token, user, new Date().setFullYear(new Date().getFullYear() + 1))\n            .then(() => {\n              if (route.params?.roomSlug) {\n                navigation.navigate('JoinConferenceScreen', { roomSlug: route.params?.roomSlug });\n              } else {\n                navigation.navigate('DrawerNavigator');\n              }\n            })\n            .catch((err) => {\n              console.log(`error ${err}`);\n            });\n        })\n        .catch((err) => {\n          console.log(`error ${err}`);\n        });\n      setDidLoad(true);\n    }\n  }, [didLoad, authCtx]);\n\n  const handleOAuthLogin = (response) => {\n    const token = response.headers.authorization;\n    const { data } = response.data;\n\n    const user = { email: data.email, slug: data.slug, name: data.name };\n    // eslint-disable-next-line react/destructuring-assignment\n    authCtx.login(token, user, new Date().setFullYear(new Date().getFullYear() + 1))\n      .then(() => {\n        setIsCheckingSocial({\n          value: false,\n          reason: t('screens.login.socialOk'),\n        });\n        if (route.params?.roomSlug) {\n          navigation.navigate('JoinConferenceScreen', { roomSlug: route.params?.roomSlug });\n        } else {\n          navigation.navigate('DrawerNavigator');\n        }\n      })\n      .catch((err) => {\n        setIsCheckingSocial({\n          value: false,\n          reason: t('screens.login.socialError'),\n        });\n        console.log(err);\n      });\n  };\n\n  // Google Oauth\n  const [request, response, promptAsync] = Google.useAuthRequest({\n    iosClientId: Constants.expoConfig.extra.GOOGLE_ID,\n    androidClientId: Constants.expoConfig.extra.GOOGLE_ID,\n  });\n\n  useEffect(() => {\n    if (response?.type === 'cancel' || response?.type === 'dismiss') {\n      setIsCheckingSocial({\n        value: false,\n        reason: t('screens.login.socialCancel'),\n      });\n    }\n    if (response?.type === 'success') {\n      const { authentication } = response;\n      const { accessToken } = authentication;\n      api.post('/api/v1/users/auth/google/callback', {\n        data: accessToken\n      })\n        .then((res) => {\n          handleOAuthLogin(res);\n        })\n        .catch((error) => {\n          console.log(`Api fail with error: ${error}`);\n        });\n    }\n  }, [response]);\n\n  const handleGoogleButton = () => {\n    setIsCheckingSocial({\n      value: true,\n      reason: t('screens.login.socialCheck'),\n    });\n    promptAsync();\n  };\n\n  // ### Apple ###\n  const [appleAuthAvailable, setAppleAuthAvailable] = useState(false);\n\n  useEffect(() => {\n    const checkAvailable = async () => {\n      const isAvailable = await AppleAuthentication.isAvailableAsync();\n      setAppleAuthAvailable(isAvailable);\n    };\n    checkAvailable();\n  }, []);\n\n  const handleAppleButton = () => {\n    setIsCheckingSocial({\n      value: true,\n      reason: t('screens.login.socialCheck'),\n    });\n    AppleSignIn();\n  };\n\n  const AppleSignIn = async () => {\n    try {\n      const credential = await AppleAuthentication.signInAsync({\n        requestedScopes: [\n          AppleAuthentication.AppleAuthenticationScope.FULL_NAME,\n          AppleAuthentication.AppleAuthenticationScope.EMAIL,\n        ],\n      });\n      api.post('/api/v1/users/auth/apple/callback', {\n        data: {\n          identityToken: credential.identityToken,\n          authorizationCode: credential.authorizationCode,\n          userIdentity: credential.user\n        }\n      })\n        .then((res) => {\n          handleOAuthLogin(res);\n        })\n        .catch((error) => {\n          console.log(`Api fail with error: ${error}`);\n          setIsCheckingSocial({\n            value: false,\n            reason: t('screens.login.socialCancel'),\n          });\n        });\n    } catch (e) {\n      if (e.code === 'ERR_REQUEST_CANCELED') {\n        // handle that the user canceled the sign-in flow\n        setIsCheckingSocial({\n          value: false,\n          reason: t('screens.login.socialCancel'),\n        });\n        console.log(e);\n      } else {\n        // handle other errors\n        setIsCheckingSocial({\n          value: false,\n          reason: t('screens.login.socialCancel'),\n        });\n        console.log(e);\n      }\n    }\n  };\n\n  const LoginPage = () => {\n    return (\n      <>\n        <>\n          <Styled.AlternateLogin>\n            <Styled.LoadingText>{t('screens.login.login')}</Styled.LoadingText>\n          </Styled.AlternateLogin>\n\n          <Button\n            variant=\"secondary\"\n            onPress={() => navigation.navigate('EmailLoginScreen', { roomSlug: route.params?.roomSlug })}\n          >\n            Email\n          </Button>\n          <Button\n            variant=\"secondary\"\n            onPress={() => handleGoogleButton()}\n          >\n            Google\n          </Button>\n\n          {/* Apple Sign in */}\n          {!platform.android\n            && (\n              <Styled.Apple>\n                {appleAuthAvailable && (\n                  <AppleAuthentication.AppleAuthenticationButton\n                    buttonType={AppleAuthentication.AppleAuthenticationButtonType.SIGN_IN}\n                    buttonStyle={AppleAuthentication.AppleAuthenticationButtonStyle.BLACK}\n                    cornerRadius={40}\n                    style={{ justifyContent: 'center', height: 40 }}\n                    onPress={() => { handleAppleButton(); }}\n                  />\n                )}\n              </Styled.Apple>\n            )}\n        </>\n        <StatusBar style=\"dark\" />\n      </>\n    );\n  };\n\n  const CheckingSocialAnimation = () => {\n    return (\n      <Styled.LoadingContainer>\n        <ActivityIndicator animating size=\"large\" />\n        <Styled.LoadingText>{isCheckingSocial.reason}</Styled.LoadingText>\n      </Styled.LoadingContainer>\n    );\n  };\n\n  return (\n    <Styled.Container>\n      {isCheckingSocial.value\n        ? CheckingSocialAnimation()\n        : LoginPage()}\n    </Styled.Container>\n  );\n};\n\nexport default LoginScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}