{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _this = this;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { useState, useContext } from 'react';\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport { TextInput as TIPaper } from 'react-native-paper';\nimport { StatusBar } from 'expo-status-bar';\nimport Constants from 'expo-constants';\nimport { useTranslation } from 'react-i18next';\nimport TextInput from \"../../../components/TextInput\";\nimport Button from \"../../../components/Button\";\nimport Styled from \"./styles\";\nimport api from \"../../../services/api\";\nimport { AuthContext } from \"../../../store/context/auth-context\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar LoginScreen = function LoginScreen(props) {\n  var navigation = props.navigation,\n    route = props.route;\n  var platform = Constants.platform;\n  var authCtx = useContext(AuthContext);\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    showPassword = _useState2[0],\n    setShowPassword = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loginError = _useState4[0],\n    setLoginError = _useState4[1];\n  var _useState5 = useState({\n      email: '',\n      password: ''\n    }),\n    _useState6 = _slicedToArray(_useState5, 2),\n    inputValues = _useState6[0],\n    setInputValues = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    buttonLock = _useState8[0],\n    setButtonLock = _useState8[1];\n  var onChangeInputHandler = function onChangeInputHandler(inputIdentifier, value) {\n    setInputValues(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, inputIdentifier, value));\n    });\n  };\n  var signIn = function signIn() {\n    setButtonLock(true);\n    api.post('/api/v1/users/login', {\n      email: inputValues.email,\n      password: inputValues.password\n    }).then(function (response) {\n      var token = response.headers.authorization;\n      var data = response.data.data;\n      var user = {\n        email: data.email,\n        slug: data.slug,\n        name: data.name,\n        avatar: data.avatar\n      };\n      authCtx.login(token, user, new Date().setFullYear(new Date().getFullYear() + 1)).then(function () {\n        var _route$params;\n        if ((_route$params = route.params) != null && _route$params.roomSlug) {\n          var _route$params2;\n          navigation.navigate('JoinConferenceScreen', {\n            roomSlug: (_route$params2 = route.params) == null ? void 0 : _route$params2.roomSlug\n          });\n        } else {\n          navigation.navigate('DrawerNavigator');\n        }\n      }).catch(function (err) {\n        console.log(\"error \" + err);\n      });\n    }).catch(function (err) {\n      console.log(\"error \" + err);\n      setLoginError(true);\n      setButtonLock(false);\n    });\n  };\n  var handleForgotPwdButton = function handleForgotPwdButton() {\n    try {\n      Linking.openURL('https://google.com');\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return _jsx(KeyboardAvoidingView, {\n    behavior: platform.ios ? 'padding' : 'height',\n    style: {\n      flex: 1\n    },\n    children: _jsx(TouchableWithoutFeedback, {\n      children: _jsxs(Styled.Container, {\n        children: [_jsx(Styled.InputView, {\n          children: _jsx(TextInput, {\n            label: \"Email\",\n            keyboardType: \"email-address\",\n            autoCorrect: false,\n            autoCapitalize: \"none\",\n            onError: loginError,\n            value: inputValues.email,\n            onChangeText: onChangeInputHandler.bind(_this, 'email')\n          })\n        }), _jsx(Styled.InputView, {\n          children: _jsx(TextInput, {\n            label: t('screens.login.password'),\n            secureTextEntry: !showPassword,\n            autoCorrect: false,\n            onError: loginError,\n            value: inputValues.password,\n            onChangeText: onChangeInputHandler.bind(_this, 'password'),\n            right: _jsx(TIPaper.Icon, {\n              name: !showPassword ? 'eye' : 'eye-off',\n              onPress: function onPress() {\n                setShowPassword(function (prevState) {\n                  return !prevState;\n                });\n              }\n            })\n          })\n        }), loginError ? _jsxs(Styled.InfoContainer, {\n          style: {\n            justifyContent: 'space-between'\n          },\n          children: [_jsx(Styled.WrongCredentials, {\n            children: \"Email ou Senha errados\"\n          }), _jsx(Styled.ForgotPassword, {\n            onPress: handleForgotPwdButton,\n            children: t('screens.login.forgotPassword')\n          })]\n        }) : _jsx(Styled.InfoContainer, {\n          children: _jsx(Styled.ForgotPassword, {\n            onPress: handleForgotPwdButton,\n            children: t('screens.login.forgotPassword')\n          })\n        }), _jsx(Button, {\n          variant: \"tertiary\",\n          onPress: signIn,\n          disabled: buttonLock,\n          children: t('screens.login.login')\n        }), _jsx(StatusBar, {\n          style: \"light\"\n        })]\n      })\n    })\n  });\n};\nexport default LoginScreen;","map":{"version":3,"names":["useState","useContext","Linking","KeyboardAvoidingView","TouchableWithoutFeedback","TextInput","TIPaper","StatusBar","Constants","useTranslation","Button","Styled","api","AuthContext","jsx","_jsx","jsxs","_jsxs","LoginScreen","props","navigation","route","platform","authCtx","_useTranslation","t","_useState","_useState2","_slicedToArray","showPassword","setShowPassword","_useState3","_useState4","loginError","setLoginError","_useState5","email","password","_useState6","inputValues","setInputValues","_useState7","_useState8","buttonLock","setButtonLock","onChangeInputHandler","inputIdentifier","value","prevState","_objectSpread","_defineProperty","signIn","post","then","response","token","headers","authorization","data","user","slug","name","avatar","login","Date","setFullYear","getFullYear","_route$params","params","roomSlug","_route$params2","navigate","catch","err","console","log","handleForgotPwdButton","openURL","behavior","ios","style","flex","children","Container","InputView","label","keyboardType","autoCorrect","autoCapitalize","onError","onChangeText","bind","_this","secureTextEntry","right","Icon","onPress","InfoContainer","justifyContent","WrongCredentials","ForgotPassword","variant","disabled"],"sources":["/home/matheus/mconf/greenlight-mobile/src/screens/LoginScreen/EmailLoginScreen/index.js"],"sourcesContent":["import { useState, useContext } from 'react';\nimport {\n  Linking, KeyboardAvoidingView, TouchableWithoutFeedback\n} from 'react-native';\nimport { TextInput as TIPaper } from 'react-native-paper';\nimport { StatusBar } from 'expo-status-bar';\nimport Constants from 'expo-constants';\nimport { useTranslation } from 'react-i18next';\nimport TextInput from '../../../components/TextInput';\nimport Button from '../../../components/Button';\nimport Styled from './styles';\nimport api from '../../../services/api';\nimport { AuthContext } from '../../../store/context/auth-context';\n\nconst LoginScreen = (props) => {\n  const { navigation, route } = props;\n  const { platform } = Constants;\n  const authCtx = useContext(AuthContext);\n  const { t } = useTranslation();\n\n  const [showPassword, setShowPassword] = useState(false);\n  const [loginError, setLoginError] = useState(false);\n  const [inputValues, setInputValues] = useState({\n    email: '',\n    password: '',\n  });\n\n  const [buttonLock, setButtonLock] = useState(false);\n  const onChangeInputHandler = (inputIdentifier, value) => {\n    setInputValues((prevState) => {\n      return {\n        ...prevState,\n        [inputIdentifier]: value,\n      };\n    });\n  };\n\n  const signIn = () => {\n    setButtonLock(true);\n    api.post('/api/v1/users/login', {\n      email: inputValues.email,\n      password: inputValues.password\n    }).then((response) => {\n      const token = response.headers.authorization;\n      const { data } = response.data;\n      const user = {\n        email: data.email, slug: data.slug, name: data.name, avatar: data.avatar\n      };\n      // eslint-disable-next-line react/destructuring-assignment\n      authCtx.login(token, user, new Date().setFullYear(new Date().getFullYear() + 1))\n        .then(() => {\n          if (route.params?.roomSlug) {\n            navigation.navigate('JoinConferenceScreen', { roomSlug: route.params?.roomSlug });\n          } else {\n            navigation.navigate('DrawerNavigator');\n          }\n        })\n        .catch((err) => {\n          console.log(`error ${err}`);\n        });\n    })\n      .catch((err) => {\n        console.log(`error ${err}`);\n        setLoginError(true);\n        setButtonLock(false);\n      });\n  };\n\n  const handleForgotPwdButton = () => {\n    try {\n      Linking.openURL('https://google.com');\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={platform.ios ? 'padding' : 'height'}\n      style={{ flex: 1 }}\n    >\n      <TouchableWithoutFeedback>\n        <Styled.Container>\n          <Styled.InputView>\n            <TextInput\n              label=\"Email\"\n              keyboardType=\"email-address\"\n              autoCorrect={false}\n              autoCapitalize=\"none\"\n              onError={loginError}\n              value={inputValues.email}\n              onChangeText={onChangeInputHandler.bind(this, 'email')}\n            />\n          </Styled.InputView>\n          <Styled.InputView>\n            <TextInput\n              label={t('screens.login.password')}\n              secureTextEntry={!showPassword}\n              autoCorrect={false}\n              onError={loginError}\n              value={inputValues.password}\n              onChangeText={onChangeInputHandler.bind(this, 'password')}\n              right={(\n                <TIPaper.Icon\n                  name={!showPassword ? 'eye' : 'eye-off'}\n                  onPress={() => {\n                    setShowPassword((prevState) => !prevState);\n                  }}\n                />\n          )}\n            />\n          </Styled.InputView>\n\n          {loginError ? (\n            <Styled.InfoContainer style={{ justifyContent: 'space-between' }}>\n              <Styled.WrongCredentials>Email ou Senha errados</Styled.WrongCredentials>\n              <Styled.ForgotPassword onPress={handleForgotPwdButton}>\n                {t('screens.login.forgotPassword')}\n              </Styled.ForgotPassword>\n            </Styled.InfoContainer>\n          ) : (\n            <Styled.InfoContainer>\n              <Styled.ForgotPassword onPress={handleForgotPwdButton}>\n                {t('screens.login.forgotPassword')}\n              </Styled.ForgotPassword>\n            </Styled.InfoContainer>\n          )}\n\n          <Button\n            variant=\"tertiary\"\n            onPress={signIn}\n            disabled={buttonLock}\n          >\n            {t('screens.login.login')}\n          </Button>\n          <StatusBar style=\"light\" />\n        </Styled.Container>\n\n      </TouchableWithoutFeedback>\n    </KeyboardAvoidingView>\n  );\n};\n\nexport default LoginScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}